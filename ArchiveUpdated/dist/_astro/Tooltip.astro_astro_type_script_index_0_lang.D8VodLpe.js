import{g as s}from"./index.D1ftmvKV.js";class g{constructor(e){this.grid=e,this.artists=this.grid.children,this.artists.length!==0&&(this.tooltip=document.querySelector(".tooltip"),this.arrow=this.tooltip.querySelector(".tooltip__row--ra svg"),this.OFFSET_X=20,this.OFFSET_Y=0,this.animationConfig={texts:{duration:.7,ease:"expo"},tooltip:{duration:.6,ease:"power4.inOut"},textsDelay:.4,hideDelay:"-=0.7"},this.rowAnimationDirections={stagename:{in:{yPercent:-100},out:{yPercent:-100}},name:{in:{yPercent:100},out:{yPercent:100}},genre:{in:{yPercent:100},out:{yPercent:100}},arrow:{in:{yPercent:-100},out:{yPercent:-100}}},this.hoverTarget=null,this.isTooltipVisible=!1,this.scaleDownTimeout,this.scaleDownTimeline,this.mouseLeaveTimeout,this.rowTimelines={},this.arrowTimeline=null,this.windowWidth=window.innerWidth,this.xTo=s.quickTo(this.tooltip,"x",{duration:.6,ease:"expo"}),this.yTo=s.quickTo(this.tooltip,"y",{duration:.6,ease:"expo"}),this.tooltip.querySelectorAll(".tooltip__row").forEach(i=>i.dataset.active="0"),this.initializeEvents())}initializeEvents(){this.grid.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("resize",this.handleResize),[...this.artists].forEach(e=>{e.addEventListener("mouseenter",this.handleMouseEnter),e.addEventListener("mouseleave",this.handleMouseLeave)})}handleMouseMove=e=>{if(!this.hoverTarget)return;const i=this.tooltip.offsetWidth;let t;const o=e.clientY+this.OFFSET_Y+window.scrollY;e.clientX+this.OFFSET_X+i>this.windowWidth?t=e.clientX-this.OFFSET_X-i+window.scrollX:t=e.clientX+this.OFFSET_X+window.scrollX,this.isTooltipVisible?(this.xTo(t),this.yTo(o)):(this.scaleDownTimeline&&this.scaleDownTimeline.kill(),clearTimeout(this.scaleDownTimeout),s.set(this.tooltip,{x:t,y:o}),s.fromTo(this.tooltip,{scale:0,opacity:1,transformOrigin:"0% 100%"},{...this.animationConfig.tooltip,scale:1}),this.isTooltipVisible=!0),clearTimeout(this.scaleDownTimeout),this.scaleDownTimeout=setTimeout(()=>{this.hoverTarget||(this.scaleDownTimeline=s.timeline(),this.updateTooltip({stagename:"",name:"",genre:""},this.scaleDownTimeline,"out"),this.scaleDownTimeline.to(this.tooltip,{...this.animationConfig.tooltip,scale:0},this.animationConfig.hideDelay),this.isTooltipVisible=!1)},50)};handleMouseEnter=e=>{clearTimeout(this.mouseLeaveTimeout),this.hoverTarget=e.currentTarget,this.scaleDownTimeline&&this.scaleDownTimeline.kill(),clearTimeout(this.scaleDownTimeout);const i=this.hoverTarget.dataset.stagename,t=this.hoverTarget.dataset.name,o=this.hoverTarget.dataset.genre,n=s.timeline();this.updateTooltip({stagename:i,name:t,genre:o},n,this.isTooltipVisible?"none":"in")};handleMouseLeave=()=>{this.hoverTarget=null,this.mouseLeaveTimeout=setTimeout(()=>{!this.hoverTarget&&this.isTooltipVisible&&(s.set(this.tooltip,{scale:0,opacity:0}),this.isTooltipVisible=!1)},50)};handleResize=()=>{this.windowWidth=window.innerWidth};initializeEvents(){this.grid.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("resize",this.handleResize),[...this.artists].forEach(e=>{e.addEventListener("mouseenter",this.handleMouseEnter),e.addEventListener("mouseleave",this.handleMouseLeave)})}destroy(){this.arrowTimeline&&this.arrowTimeline.kill(),this.scaleDownTimeline&&this.scaleDownTimeline.kill(),Object.values(this.rowTimelines).forEach(e=>e&&e.kill()),clearTimeout(this.scaleDownTimeout),clearTimeout(this.mouseLeaveTimeout),this.grid.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),[...this.artists].forEach(e=>{e.removeEventListener("mouseenter",this.handleMouseEnter),e.removeEventListener("mouseleave",this.handleMouseLeave)})}updateTooltip(e,i,t){Object.entries(e).forEach(([o,n])=>{const l=`[data-field="${o}"]`;this.updateTextSlider(l,n,i,t)}),(t==="in"&&!this.isTooltipVisible||t==="out"&&this.isTooltipVisible)&&this.animateArrow(i,t)}updateTextSlider(e,i,t,o){const n=this.tooltip.querySelector(e),l=n.querySelectorAll(".oh__inner");if(l.length<2)return;const c=n.dataset.active==="0"?0:1,u=c===0?1:0,r=l[c],a=l[u],T=e.replace('[data-field="',"").replace('"]',""),w=this.rowAnimationDirections[T]||this.rowAnimationDirections.name,m={...w.out},d={...w.in};if(this.rowTimelines[e]&&o!=="out"&&this.rowTimelines[e].kill(),this.rowTimelines[e]=s.timeline(),o==="in")s.set(r,m),s.set(a,d),this.rowTimelines[e].to(r,{...this.animationConfig.texts,...m},this.animationConfig.textsDelay),s.set(a,d),this.rowTimelines[e].to(a,{...this.animationConfig.texts,yPercent:0,onStart:()=>{a.textContent=i}},this.animationConfig.textsDelay);else if(o==="none"){const v={stagename:{yPercent:100},name:{yPercent:-100},genre:{yPercent:-100}}[T]||{yPercent:0};this.rowTimelines[e].to(r,{...this.animationConfig.texts,...v},0),s.set(a,d),this.rowTimelines[e].to(a,{...this.animationConfig.texts,yPercent:0,onStart:()=>{a.textContent=i}},0)}else o==="out"&&this.rowTimelines[e].to(r,{...m,...this.animationConfig.texts},0);n.dataset.active=u.toString(),t.add(this.rowTimelines[e],0)}animateArrow(e,i="none"){if(!this.arrow)return;this.arrowTimeline&&this.arrowTimeline.kill(),this.arrowTimeline=s.timeline();const t=this.rowAnimationDirections.arrow;i==="in"?this.arrowTimeline.fromTo(this.arrow,{...t.in},{...this.animationConfig.texts,yPercent:0},this.animationConfig.textsDelay):i==="out"&&this.arrowTimeline.to(this.arrow,{...this.animationConfig.texts,...t.out},0),e.add(this.arrowTimeline,0)}}let f;const p=h=>{document.documentElement.getAttribute("data-page")==="home"&&(h==="load"?f=new g(document.querySelector("[data-grid]")):h==="before-swap"&&f.destroy())};document.addEventListener("astro:page-load",()=>p("load"));document.addEventListener("astro:before-swap",()=>p("before-swap"));
